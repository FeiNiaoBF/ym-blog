---
title: RISC-v的学习笔记
description: 这是我关于 RiSC-v的学习笔记。
slug: risc-study
data: 2022-10-09T8:00
authors:
  - name: Yeelight
    title: 本博主
    url: https://github.com/FeiNiaoBF
    image_url: https://github.com/FeiNiaoBF.png
tags: [CS61C, RISC, 汇编语言]
image: https://i.imgur.com/mErPwqL.png
hide_table_of_contents: false
---

## 前言

在我学习c语言的时候我在想计算机是怎么知道我在写什么的，后面在我学习到了cs61c后我知道了汇编语言和底层语言（计算机语言），而RISC很好的帮助我们深入计算机去了解汇编语言。

<!--truncate-->

## RISC-v的寄存器功能

RV32 有 32 个寄存器，而编号从x0到x31，且这32个各有各的作用，对这 32 个寄存器的定义如下：其中 ABI 是寄存器的二进制接口的名称，可以在汇编中使用。

| 寄存器编号 | 寄存器 ABI 名称 | 寄存器功能 |
|:----:|:----:|:----:|
| x0 | zero | 全0寄存器 |
| x1 | ra | 跳转返回指针|
| x2 | sp | 栈指针 |
| x3 | gp | 全局指针 |
| x4 | tp | 线程指针 |
| x5 | t0 | 临时存储器 |
| x6 | t1 | 临时存储器 |
| x7 | t2 | 临时存储器 |
| x8 | s0/fp |存储寄存器，框架指针|
| x9 | s1 | 存储寄存器 |
| x10 | a0 | 函数参数寄存器（可用于返回值）|
| x11 |	a1 |函数参数寄存器（可用于返回值）|
| x12-x17 | a2-a7 | 函数参数寄存器 |
| x18-x27 | s2-s11 | 存储寄存器 |
| x28-x31 | t3-t6 | 临时存储器 |


## RISC的指令集

RISC是有47个指令的，而这47个指令能完成所有的现代操作系统的运行基本要求。

为了方便学习，将指令集进行分类

### 6种基本整数指令集
1. 整数运算指令：实现算术、逻辑、比较等运算。
> 具有 7 条算数运算指令，分别是 `add`, `addi`, `sub`, `slt`, `sltu`, `slti`, `sltiu`

``` s
add rd, rs1, rs2    # 是将 rs1 和 rs2 相加并写入 rd 中
addi rd, rs1, imm   # 是将 rs1 和 imm 相加
sub rd,rs1,rs2      # 是将 rs1 减去 rs2 并写入 rd 中
slt                 # 是有符号的比较指令，即 rs1 小于 rs2 则置 1，否者置 0
sltu                # 是无符号的比较指令，即 rs1 小于 rs2 则置 1，否者置 0
slti                # 是 rs1 小于立即数则置 1，否者置 0。
sltiu

```

2. 分支转移指令：实现条件转移、无条件转移等运算，并且没有延迟槽。
3. 加载存储指令：实现字节、半字、字的加载、存储操作，采用的都是寄存器相对寻址方式。
4. 控制与状态寄存器访问指令：实现对系统控制与状态寄存器的原子读-写、原子读-修改、原子读-清零等操作。
5. 系统调用指令：实现系统调用、调试等功能。
